{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getImages(keyWord, currantPage) {\n    const params = {\n        key: '43249690-fb8fa8f624055727458ab84aa',\n        q: keyWord,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: currantPage,\n    }\n    const url = 'https://pixabay.com/api/';\n    const res = await axios.get(url, { params })\n    return res.data\n}\n\n","export function imageTemplate({ largeImageURL, webformatURL, tags, likes, views, comments, downloads }) {\n    return `<li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\"> <img loading=\"lazy\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"152\"/> </a>\n          <div class=\"gallery-item-description\">\n            <p class=\"description\"><b>Likes</b> ${likes}</p>\n            <p class=\"description\"><b>Views</b> ${views}</p>\n            <p class=\"description\"><b>Comments</b> ${comments}</p>\n            <p class=\"description\"><b>Downloads</b> ${downloads}</p>\n            </div>\n          </li>`;\n}\n\nexport function renderImages(imagesArr) {\n     return imagesArr.map(imageTemplate).join('')\n}\n\nexport function getParam() {\n  const elem = document.querySelector('.gallery-item');\n  const elements = elem.getBoundingClientRect();\n  return elements.height;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getImages } from '../src/js/pixabay-api';\nimport { imageTemplate } from './js/render-function'\nimport { renderImages } from './js/render-function'\nimport { getParam } from './js/render-function'\n\nconst form = document.querySelector(\".search-form\");\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-more');\nconst btnMore = document.querySelector('.btn-more');\nlet searchValue = '';\nlet currantPage = 1;\nlet maxPage = 0;\nconst perPage = 15;\n\nform.addEventListener('submit', crateGallery)\nbtnMore.addEventListener('click', onLoadMore)\n\nasync function crateGallery(event) {\n    event.preventDefault()\n    loader.classList.remove('visually-hidden');\n    searchValue = form.elements.searchInput.value;\n    currantPage = 1\n    gallery.innerHTML = \"\"\n    const images = await getImages(searchValue, currantPage)\n    try {\n        if (images.hits.length < 1) {\n        iziToast.show({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        }\n        ) \n    }\n    const markup = renderImages(images.hits);\n        gallery.insertAdjacentHTML('beforeend', markup)\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: `alt`,\n        captionDelay: 250,\n        });\n        form.reset() \n        loader.classList.add('visually-hidden');\n        lightbox.refresh(); \n    } catch (error) {\n        console.log(error)\n    }\n    maxPage = Math.ceil(images.totalHits / perPage)\n    checkBtnStatus()\n    \n}\n\nfunction showBtnMore() {\n    btnMore.classList.remove('visually-hidden')\n }\nfunction hideBtnMore() {\n    btnMore.classList.add('visually-hidden')\n}\n\nfunction checkBtnStatus() {\n    if (currantPage >= maxPage) {\n        hideBtnMore()\n    } else {\n       showBtnMore()\n    }\n}\n\nasync function onLoadMore() {\n    currantPage += 1;\n    loaderMore.classList.remove('visually-hidden');\n    const images = await getImages(searchValue, currantPage)\n    try {\n        if (currantPage >= maxPage) {\n        loaderMore.classList.add('visually-hidden'); \n        iziToast.show({\n        title: 'Error',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        backgroundColor: '#ef4040',\n        position: 'topRight',\n        }\n        )\n        }\n    const markup = renderImages(images.hits);\n        gallery.insertAdjacentHTML('beforeend', markup)\n    const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: `alt`,\n        captionDelay: 250,\n        });\n        form.reset() \n        loaderMore.classList.add('visually-hidden');\n        lightbox.refresh(); \n    } catch (error) {\n        console.log(error)\n    }\n        window.scrollBy({\n        top: getParam() * 2,\n        left: 0,\n        behavior: 'smooth',\n    });\n    checkBtnStatus()\n}\n\n\n\n\n\n"],"names":["getImages","keyWord","currantPage","params","url","axios","imageTemplate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderImages","imagesArr","getParam","form","gallery","loader","loaderMore","btnMore","searchValue","maxPage","perPage","crateGallery","onLoadMore","event","images","iziToast","markup","lightbox","SimpleLightbox","error","checkBtnStatus","showBtnMore","hideBtnMore"],"mappings":"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"}